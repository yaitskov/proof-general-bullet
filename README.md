# Bullet Proof-General

This is a [proof general](https://github.com/ProofGeneral) extension
which detects when the current subgoal, annotated with a bullet, is
proved (after `C-c C-n` command) and automatically inserts a proper
bullet for a next sibling subgoal or for a sibling of the goal (if
last subgoal is proved).

## Installation

### sources

``` shell
mkdir -p ~/.emacs.d
cd ~/.emacs.d
git clone https://github.com/yaitskov/proof-general-bullet.git
```

### init.el

Append following lines to `~/.emacs.d/init.el` file:

``` emacs-lisp
(add-to-list 'load-path "~/.emacs.d/proof-general-bullet/lisp")
(require 'proof-general-bullet)
```

## Features overview

### Automatic bullet insertion

If tactic generates subgoals and first subgoal uses a bullet as a goal
selector (e.g. `-` not curly braces) then on transition to a following subgoal
Emacs inserts bullet automatically.

#### Use case 1
Snippet before completion:
``` coq
  split.
  - auto. (* cursor is here *)
```

Snippet after completion:
``` coq
  split.
  - auto.
  - (* cursor is here *)
```

#### Use case 2
Snippet before completion:
``` coq
  split.
  - inducion x.
    + auto.
    + auto. (* cursor is here *)
```

Snippet after completion:
``` coq
  split.
  - inducion x.
    + auto.
    + auto.
  - (* cursor is here *)
```

### Bulk bullet indentation

Functions `bpg-indent-right` and `bpg-indent-right` rewrite bullets
with their siblings in the hierarchy, so a big snippet with bullets
can be quickly moved into a subgoal or vice versa.  For example you
want to move split tactic, used at very beginning of the proof, into a
subgoals generated by induction tactic:

```coq
  split.
  - induction x.
    + auto.
    + auto.
      * induciton y.
        -- auto.
        -- auto.
    + reflexivity.
```

The proof of split subgoal bubbles up:
```coq
  induction x.
  - auto.
  - auto.
    + induciton y.
      * auto.
      * auto.
  - reflexivity.
```
